---
import { cn } from '@utils/cn';

import HomeIcon from '@icons/MingcuteHome7Line.svg';
import WorkIcon from '@icons/BytesizePortfolio.svg';
import DesignIcon from '@icons/IconoirDesignNib.svg';
import GithubIcon from '@icons/IconoirGithub.svg';

const navLinks = [
	{ href: '/', label: 'Home', target: '_self', Icon: HomeIcon },
	{ href: '/work', label: 'Work', target: '_self', Icon: WorkIcon },
	{ href: '/design', label: 'Design', target: '_self', Icon: DesignIcon },
	{ href: 'https://github.com/frsswq', label: 'Github', target: '_blank', Icon: GithubIcon }
];
---

{
	navLinks.map(({ href, label, target, Icon }) => (
		<a
			href={href}
			aria-label={label}
			data-text={label}
			data-href={href}
			target={target}
			class={cn(
				`nav-button relative flex items-center justify-center gap-x-2 rounded-md border border-transparent
				px-2.5 py-2.5 text-sm leading-none tracking-tight text-zinc-500 hover:border-zinc-200/50
				hover:bg-zinc-100/80 hover:text-black md:text-base`
			)}
		>
			<Icon class="icon size-6 md:size-5" />
		</a>
	))
}

<style>
	.nav-button::before {
		display: none;
		content: attr(data-text);
		position: absolute;
		transform: translateY(-50%);
		top: 110%;
		animation: scale-in 0.2s forwards;

		font-size: 0.875rem;
		padding: 0.5rem 0.6rem 0.5rem 0.5rem;
		background-color: var(--color-zinc-50);
		border: 0.5px solid var(--color-zinc-200);
		border-radius: 0.25rem;
	}

	.nav-button:hover::before {
		display: block;
	}

	.icon {
		place-self: center;
	}

	@keyframes scale-in {
		0% {
			opacity: 0;
			transform: rotateX(-10deg) scale(0.9);
		}
		100% {
			opacity: 1;
			transform: rotateX(0deg) scale(1);
		}
	}
</style>

<script>
	function updatePathname() {
		const currentPath = window.location.pathname;
		const navButtons = document.querySelectorAll('.nav-button[target="_self"]');

		navButtons.forEach((button) => {
			const buttonHref = button.getAttribute('data-href');
			if (buttonHref === currentPath) {
				button.classList.remove('text-zinc-500');
				button.classList.add('text-black');
			} else {
				button.classList.remove('text-black');
				button.classList.add('text-zinc-500');
			}
		});
	}

	updatePathname();

	window.addEventListener('popstate', updatePathname);
</script>
